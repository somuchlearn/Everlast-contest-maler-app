(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6831:(n,e,t)=>{Promise.resolve().then(t.bind(t,7479))},7479:(n,e,t)=>{"use strict";t.d(e,{default:()=>s});var r=t(5155),a=t(2115),i=t(5172);let s=function(){var n,e;let[s,o]=(0,a.useState)(!1),[l,d]=(0,a.useState)(""),[c,p]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[w,k]=(0,a.useState)([]),[N,z]=(0,a.useState)([]),[S,F]=(0,a.useState)(0),[C,D]=(0,a.useState)(!1),T=(0,a.useRef)(null),A=(0,a.useRef)([]),I=(0,a.useRef)(!1),E=(0,a.useRef)(null),P=[{icon:"\uD83C\uDF99️",title:"Audio wird verarbeitet",sub:"Whisper AI transkribiert..."},{icon:"\uD83D\uDD0D",title:"Analyse l\xe4uft",sub:"Projekt wird ausgewertet..."},{icon:"\uD83D\uDCCA",title:"Kalkulation",sub:"Preise werden berechnet..."},{icon:"✨",title:"Finalisierung",sub:"Angebot wird erstellt..."}];(0,a.useEffect)(()=>{(async()=>{try{let{register:n}=await t.e(182).then(t.bind(t,4182));await n("CommandOrControl+Shift+R",n=>{"Pressed"===n.state&&(I.current?R():M())})}catch(n){console.error("Hotkey error:",n)}})()},[]),(0,a.useEffect)(()=>{if(x){let n=setInterval(()=>{F(n=>(n+1)%P.length)},2e3);return()=>clearInterval(n)}},[x]);let _=n=>{if(!n)return;let e=Array.from(n);k(n=>[...n,...e]),e.forEach(n=>{z(e=>[...e,URL.createObjectURL(n)])})},M=async()=>{if(!x)try{let n=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100,channelCount:1}}),e="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(e)||(e="audio/webm"),MediaRecorder.isTypeSupported(e)||(e="audio/mp4");let t=new MediaRecorder(n,{mimeType:e});T.current=t,A.current=[],t.ondataavailable=n=>{n.data.size>0&&A.current.push(n.data)},t.onstop=async()=>{m("Transkribiere...");let n=new Blob(A.current,{type:e});if(n.size<1e4)return void m("Aufnahme zu kurz");let t=e.includes("mp4")?"mp4":"webm",r=new FormData;r.append("file",n,"audio.".concat(t)),r.append("model","whisper-1"),r.append("language","de"),r.append("prompt","Malerarbeiten, R\xe4ume, Quadratmeter, W\xe4nde, Decken, Lackieren.");try{let n=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:"Bearer ".concat("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")},body:r}),e=(await n.json()).text||"";if(["untertitel","subtitle","amara","stephanie","vielen dank","thank you"].some(n=>e.toLowerCase().includes(n))||e.length<10)return void m("Keine Sprache erkannt");d(e),j(n=>n?"".concat(n,"\n\n").concat(e):e),m("")}catch(n){m("Transkription fehlgeschlagen")}},t.start(250),o(!0),I.current=!0,m("")}catch(n){m("Mikrofon nicht verf\xfcgbar")}},R=()=>{var n,e;null==(n=T.current)||n.stop(),null==(e=T.current)||e.stream.getTracks().forEach(n=>n.stop()),o(!1),I.current=!1},O=async()=>{if(!h.trim())return void m("Kundenname erforderlich");if(!y.trim()&&!w.length)return void m("Beschreibung oder Medien erforderlich");g(!0),F(0),m("");try{let n=new FormData;n.append("customerName",h),n.append("address",f),n.append("notes",y),w.forEach((e,t)=>n.append("media_".concat(t),e));let e=await fetch("https://n8n.artofzionai.de/webhook/maler-angebot",{method:"POST",body:n});if(!e.ok)throw Error("Fehler ".concat(e.status));p(await e.json())}catch(n){m(n.message)}g(!1)},B=(null==c?void 0:c.gesamt_netto)||0,K=1.19*B;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:"\n                @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');\n                \n                *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }\n                \n                :root {\n                    --bg-primary: #09090b;\n                    --bg-secondary: #18181b;\n                    --bg-tertiary: #27272a;\n                    --border: #3f3f46;\n                    --border-light: #52525b;\n                    --text-primary: #fafafa;\n                    --text-secondary: #a1a1aa;\n                    --text-tertiary: #71717a;\n                    --accent: #3b82f6;\n                    --accent-hover: #2563eb;\n                    --success: #22c55e;\n                    --warning: #eab308;\n                    --error: #ef4444;\n                    --gradient-1: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);\n                    --gradient-2: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);\n                    --shadow-sm: 0 1px 2px rgba(0,0,0,0.4);\n                    --shadow-md: 0 4px 12px rgba(0,0,0,0.4);\n                    --shadow-lg: 0 12px 40px rgba(0,0,0,0.5);\n                    --radius-sm: 6px;\n                    --radius-md: 10px;\n                    --radius-lg: 16px;\n                    --radius-xl: 24px;\n                }\n\n                body { \n                    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n                    background: var(--bg-primary);\n                    color: var(--text-primary);\n                    line-height: 1.5;\n                    -webkit-font-smoothing: antialiased;\n                }\n\n                .app {\n                    min-height: 100vh;\n                    background: \n                        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(59, 130, 246, 0.15), transparent),\n                        var(--bg-primary);\n                }\n\n                .container {\n                    max-width: 720px;\n                    margin: 0 auto;\n                    padding: 0 24px;\n                }\n\n                /* Header */\n                .header {\n                    padding: 20px 0;\n                    border-bottom: 1px solid var(--border);\n                    background: rgba(9, 9, 11, 0.8);\n                    backdrop-filter: blur(12px);\n                    position: sticky;\n                    top: 0;\n                    z-index: 50;\n                }\n\n                .header-content {\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                }\n\n                .logo {\n                    display: flex;\n                    align-items: center;\n                    gap: 14px;\n                }\n\n                .logo-icon {\n                    width: 42px;\n                    height: 42px;\n                    background: var(--gradient-1);\n                    border-radius: var(--radius-md);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    font-size: 20px;\n                    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);\n                }\n\n                .logo-text h1 {\n                    font-size: 18px;\n                    font-weight: 700;\n                    letter-spacing: -0.02em;\n                }\n\n                .logo-text span {\n                    color: var(--accent);\n                }\n\n                .logo-text p {\n                    font-size: 12px;\n                    color: var(--text-tertiary);\n                    font-weight: 500;\n                }\n\n                .kbd {\n                    display: inline-flex;\n                    align-items: center;\n                    gap: 6px;\n                    padding: 6px 10px;\n                    background: var(--bg-secondary);\n                    border: 1px solid var(--border);\n                    border-radius: var(--radius-sm);\n                    font-size: 11px;\n                    font-weight: 600;\n                    color: var(--text-secondary);\n                    font-family: 'SF Mono', Monaco, monospace;\n                }\n\n                /* Main Content */\n                .main {\n                    padding: 40px 0 80px;\n                }\n\n                /* Card */\n                .card {\n                    background: var(--bg-secondary);\n                    border: 1px solid var(--border);\n                    border-radius: var(--radius-lg);\n                    overflow: hidden;\n                    margin-bottom: 24px;\n                }\n\n                .card-header {\n                    padding: 20px 24px;\n                    border-bottom: 1px solid var(--border);\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                }\n\n                .card-header h2 {\n                    font-size: 14px;\n                    font-weight: 600;\n                    color: var(--text-primary);\n                    display: flex;\n                    align-items: center;\n                    gap: 10px;\n                }\n\n                .card-header-icon {\n                    width: 32px;\n                    height: 32px;\n                    background: var(--bg-tertiary);\n                    border-radius: var(--radius-sm);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    font-size: 14px;\n                }\n\n                .card-body {\n                    padding: 24px;\n                }\n\n                /* Form */\n                .form-grid {\n                    display: grid;\n                    grid-template-columns: 1fr 1fr;\n                    gap: 16px;\n                    margin-bottom: 24px;\n                }\n\n                .form-group {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 8px;\n                }\n\n                .form-group.full {\n                    grid-column: 1 / -1;\n                }\n\n                .label {\n                    font-size: 13px;\n                    font-weight: 500;\n                    color: var(--text-secondary);\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                }\n\n                .label-badge {\n                    font-size: 10px;\n                    padding: 2px 6px;\n                    background: rgba(59, 130, 246, 0.15);\n                    color: var(--accent);\n                    border-radius: 4px;\n                    font-weight: 600;\n                }\n\n                .input {\n                    padding: 12px 14px;\n                    background: var(--bg-primary);\n                    border: 1px solid var(--border);\n                    border-radius: var(--radius-md);\n                    color: var(--text-primary);\n                    font-size: 14px;\n                    font-family: inherit;\n                    transition: all 0.2s;\n                    outline: none;\n                }\n\n                .input:hover {\n                    border-color: var(--border-light);\n                }\n\n                .input:focus {\n                    border-color: var(--accent);\n                    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);\n                }\n\n                .input::placeholder {\n                    color: var(--text-tertiary);\n                }\n\n                textarea.input {\n                    resize: vertical;\n                    min-height: 120px;\n                }\n\n                /* Upload Zone */\n                .upload-zone {\n                    border: 2px dashed var(--border);\n                    border-radius: var(--radius-md);\n                    padding: 32px;\n                    text-align: center;\n                    cursor: pointer;\n                    transition: all 0.2s;\n                    background: var(--bg-primary);\n                }\n\n                .upload-zone:hover, .upload-zone.drag-over {\n                    border-color: var(--accent);\n                    background: rgba(59, 130, 246, 0.05);\n                }\n\n                .upload-icon {\n                    width: 48px;\n                    height: 48px;\n                    margin: 0 auto 16px;\n                    background: var(--bg-tertiary);\n                    border-radius: var(--radius-md);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    font-size: 20px;\n                }\n\n                .upload-zone h3 {\n                    font-size: 14px;\n                    font-weight: 600;\n                    margin-bottom: 4px;\n                }\n\n                .upload-zone p {\n                    font-size: 12px;\n                    color: var(--text-tertiary);\n                }\n\n                /* Media Previews */\n                .media-grid {\n                    display: flex;\n                    gap: 12px;\n                    flex-wrap: wrap;\n                    margin-top: 16px;\n                }\n\n                .media-item {\n                    position: relative;\n                    width: 72px;\n                    height: 72px;\n                    border-radius: var(--radius-sm);\n                    overflow: hidden;\n                    border: 1px solid var(--border);\n                }\n\n                .media-item img, .media-item video {\n                    width: 100%;\n                    height: 100%;\n                    object-fit: cover;\n                }\n\n                .media-remove {\n                    position: absolute;\n                    top: -6px;\n                    right: -6px;\n                    width: 20px;\n                    height: 20px;\n                    background: var(--error);\n                    border: 2px solid var(--bg-secondary);\n                    border-radius: 50%;\n                    color: white;\n                    font-size: 10px;\n                    font-weight: 700;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    transition: transform 0.15s;\n                }\n\n                .media-remove:hover {\n                    transform: scale(1.1);\n                }\n\n                /* Record Button */\n                .record-section {\n                    margin-bottom: 24px;\n                }\n\n                .record-btn {\n                    width: 100%;\n                    padding: 16px;\n                    background: var(--bg-tertiary);\n                    border: 1px solid var(--border);\n                    border-radius: var(--radius-md);\n                    color: var(--text-primary);\n                    font-size: 14px;\n                    font-weight: 600;\n                    font-family: inherit;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 10px;\n                    transition: all 0.2s;\n                }\n\n                .record-btn:hover {\n                    background: var(--border);\n                }\n\n                .record-btn.recording {\n                    background: rgba(239, 68, 68, 0.15);\n                    border-color: var(--error);\n                    color: var(--error);\n                }\n\n                .record-dot {\n                    width: 8px;\n                    height: 8px;\n                    background: var(--error);\n                    border-radius: 50%;\n                    animation: pulse 1.5s infinite;\n                }\n\n                @keyframes pulse {\n                    0%, 100% { opacity: 1; transform: scale(1); }\n                    50% { opacity: 0.5; transform: scale(1.2); }\n                }\n\n                .transcript-box {\n                    margin-top: 12px;\n                    padding: 12px 14px;\n                    background: rgba(34, 197, 94, 0.1);\n                    border: 1px solid rgba(34, 197, 94, 0.2);\n                    border-radius: var(--radius-sm);\n                    font-size: 13px;\n                    color: var(--success);\n                }\n\n                /* Status */\n                .status {\n                    padding: 12px 14px;\n                    border-radius: var(--radius-sm);\n                    font-size: 13px;\n                    font-weight: 500;\n                    margin-bottom: 20px;\n                    display: flex;\n                    align-items: center;\n                    gap: 8px;\n                }\n\n                .status.error {\n                    background: rgba(239, 68, 68, 0.1);\n                    border: 1px solid rgba(239, 68, 68, 0.2);\n                    color: var(--error);\n                }\n\n                .status.warning {\n                    background: rgba(234, 179, 8, 0.1);\n                    border: 1px solid rgba(234, 179, 8, 0.2);\n                    color: var(--warning);\n                }\n\n                /* Submit Button */\n                .submit-btn {\n                    width: 100%;\n                    padding: 16px 24px;\n                    background: var(--gradient-1);\n                    border: none;\n                    border-radius: var(--radius-md);\n                    color: white;\n                    font-size: 15px;\n                    font-weight: 600;\n                    font-family: inherit;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 10px;\n                    transition: all 0.2s;\n                    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);\n                }\n\n                .submit-btn:hover:not(:disabled) {\n                    transform: translateY(-1px);\n                    box-shadow: 0 0 30px rgba(59, 130, 246, 0.4);\n                }\n\n                .submit-btn:disabled {\n                    opacity: 0.5;\n                    cursor: not-allowed;\n                }\n\n                /* Processing Overlay */\n                .processing-overlay {\n                    position: fixed;\n                    inset: 0;\n                    background: rgba(9, 9, 11, 0.95);\n                    backdrop-filter: blur(8px);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    z-index: 100;\n                }\n\n                .processing-content {\n                    text-align: center;\n                    animation: fadeInUp 0.4s ease;\n                }\n\n                @keyframes fadeInUp {\n                    from { opacity: 0; transform: translateY(20px); }\n                    to { opacity: 1; transform: translateY(0); }\n                }\n\n                .processing-icon {\n                    font-size: 56px;\n                    margin-bottom: 24px;\n                    animation: float 2s ease-in-out infinite;\n                }\n\n                @keyframes float {\n                    0%, 100% { transform: translateY(0); }\n                    50% { transform: translateY(-8px); }\n                }\n\n                .processing-content h3 {\n                    font-size: 20px;\n                    font-weight: 600;\n                    margin-bottom: 6px;\n                }\n\n                .processing-content p {\n                    font-size: 14px;\n                    color: var(--text-tertiary);\n                    margin-bottom: 32px;\n                }\n\n                .progress-track {\n                    width: 200px;\n                    height: 4px;\n                    background: var(--bg-tertiary);\n                    border-radius: 2px;\n                    margin: 0 auto;\n                    overflow: hidden;\n                }\n\n                .progress-fill {\n                    height: 100%;\n                    width: 40%;\n                    background: var(--gradient-1);\n                    border-radius: 2px;\n                    animation: progress 1.5s ease-in-out infinite;\n                }\n\n                @keyframes progress {\n                    0% { transform: translateX(-100%); }\n                    100% { transform: translateX(350%); }\n                }\n\n                /* Result Card */\n                .result-card {\n                    animation: slideUp 0.5s ease;\n                }\n\n                @keyframes slideUp {\n                    from { opacity: 0; transform: translateY(20px); }\n                    to { opacity: 1; transform: translateY(0); }\n                }\n\n                .result-header {\n                    padding: 20px 24px;\n                    background: linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%);\n                    border-bottom: 1px solid rgba(34, 197, 94, 0.2);\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                }\n\n                .result-header h2 {\n                    font-size: 16px;\n                    font-weight: 600;\n                    color: var(--success);\n                    display: flex;\n                    align-items: center;\n                    gap: 10px;\n                }\n\n                .result-actions {\n                    display: flex;\n                    gap: 8px;\n                }\n\n                .btn-ghost {\n                    padding: 8px 14px;\n                    background: transparent;\n                    border: 1px solid var(--border);\n                    border-radius: var(--radius-sm);\n                    color: var(--text-secondary);\n                    font-size: 13px;\n                    font-weight: 500;\n                    font-family: inherit;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                    transition: all 0.15s;\n                }\n\n                .btn-ghost:hover {\n                    background: var(--bg-tertiary);\n                    color: var(--text-primary);\n                }\n\n                /* Stats Grid */\n                .stats-grid {\n                    display: grid;\n                    grid-template-columns: repeat(3, 1fr);\n                    gap: 12px;\n                    margin-bottom: 24px;\n                }\n\n                .stat-card {\n                    padding: 16px;\n                    background: var(--bg-primary);\n                    border: 1px solid var(--border);\n                    border-radius: var(--radius-md);\n                    text-align: center;\n                }\n\n                .stat-label {\n                    font-size: 10px;\n                    font-weight: 600;\n                    color: var(--text-tertiary);\n                    text-transform: uppercase;\n                    letter-spacing: 0.05em;\n                    margin-bottom: 6px;\n                }\n\n                .stat-value {\n                    font-size: 24px;\n                    font-weight: 700;\n                    color: var(--text-primary);\n                }\n\n                .stat-value.accent { color: var(--accent); }\n                .stat-value.success { color: var(--success); }\n                .stat-value.warning { color: var(--warning); }\n\n                /* Table */\n                .table-wrapper {\n                    overflow-x: auto;\n                    margin-bottom: 24px;\n                }\n\n                .table {\n                    width: 100%;\n                    border-collapse: collapse;\n                }\n\n                .table th {\n                    padding: 12px 16px;\n                    font-size: 10px;\n                    font-weight: 600;\n                    color: var(--text-tertiary);\n                    text-transform: uppercase;\n                    letter-spacing: 0.05em;\n                    text-align: left;\n                    background: var(--bg-primary);\n                    border-bottom: 1px solid var(--border);\n                }\n\n                .table th:last-child { text-align: right; }\n\n                .table td {\n                    padding: 14px 16px;\n                    font-size: 13px;\n                    border-bottom: 1px solid var(--border);\n                }\n\n                .table td:last-child {\n                    text-align: right;\n                    font-weight: 600;\n                }\n\n                .table tr:last-child td { border-bottom: none; }\n\n                .table tr:hover td { background: rgba(255,255,255,0.02); }\n\n                /* AI Note */\n                .ai-note {\n                    padding: 16px;\n                    background: rgba(99, 102, 241, 0.1);\n                    border: 1px solid rgba(99, 102, 241, 0.2);\n                    border-radius: var(--radius-md);\n                }\n\n                .ai-note-header {\n                    font-size: 10px;\n                    font-weight: 600;\n                    color: #818cf8;\n                    text-transform: uppercase;\n                    letter-spacing: 0.05em;\n                    margin-bottom: 8px;\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                }\n\n                .ai-note p {\n                    font-size: 13px;\n                    color: var(--text-secondary);\n                    line-height: 1.6;\n                }\n\n                @media (max-width: 640px) {\n                    .form-grid { grid-template-columns: 1fr; }\n                    .stats-grid { grid-template-columns: 1fr; }\n                    .header-content { flex-direction: column; gap: 16px; }\n                }\n            "}),(0,r.jsxs)("div",{className:"app",children:[x&&(0,r.jsx)("div",{className:"processing-overlay",children:(0,r.jsxs)("div",{className:"processing-content",children:[(0,r.jsx)("div",{className:"processing-icon",children:P[S].icon}),(0,r.jsx)("h3",{children:P[S].title}),(0,r.jsx)("p",{children:P[S].sub}),(0,r.jsx)("div",{className:"progress-track",children:(0,r.jsx)("div",{className:"progress-fill"})})]})}),(0,r.jsx)("header",{className:"header",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"logo",children:[(0,r.jsx)("div",{className:"logo-icon",children:"\uD83C\uDFA8"}),(0,r.jsxs)("div",{className:"logo-text",children:[(0,r.jsxs)("h1",{children:["PaintVoice ",(0,r.jsx)("span",{children:"AI"})]}),(0,r.jsx)("p",{children:"Intelligente Angebotserstellung"})]})]}),(0,r.jsxs)("div",{className:"kbd",children:[(0,r.jsx)("span",{children:"⌘"}),(0,r.jsx)("span",{children:"⇧"}),(0,r.jsx)("span",{children:"R"})]})]})})}),(0,r.jsx)("main",{className:"main",children:(0,r.jsx)("div",{className:"container",children:c?(0,r.jsxs)("div",{className:"card result-card",children:[(0,r.jsxs)("div",{className:"result-header",children:[(0,r.jsxs)("h2",{children:["✓ Angebot f\xfcr ",h]}),(0,r.jsxs)("div",{className:"result-actions",children:[(0,r.jsx)("button",{className:"btn-ghost",onClick:()=>{if(!(null==c?void 0:c.positionen))return;let n=new i.uE,e=n.internal.pageSize.getWidth(),t=25;if(n.setFontSize(28),n.setFont("helvetica","bold"),n.setTextColor(30,41,59),n.text("ANGEBOT",20,t),n.setFontSize(10),n.setFont("helvetica","normal"),n.setTextColor(100,116,139),n.text(new Date().toLocaleDateString("de-DE",{day:"2-digit",month:"long",year:"numeric"}),e-20,t,{align:"right"}),t+=20,n.setDrawColor(226,232,240),n.line(20,t,e-20,t),t+=15,n.setFontSize(11),n.setTextColor(30,41,59),n.setFont("helvetica","bold"),n.text("Kunde",20,t),n.setFont("helvetica","normal"),n.text(h,60,t),f&&(t+=8,n.setFont("helvetica","bold"),n.text("Adresse",20,t),n.setFont("helvetica","normal"),n.text(f,60,t)),t+=20,n.setFillColor(248,250,252),n.rect(20,t-5,e-40,12,"F"),n.setFontSize(9),n.setFont("helvetica","bold"),n.setTextColor(71,85,105),n.text("POSITION",25,t+3),n.text("MENGE",110,t+3),n.text("PREIS",140,t+3),n.text("SUMME",e-25,t+3,{align:"right"}),t+=15,n.setFont("helvetica","normal"),n.setTextColor(30,41,59),c.positionen.forEach(r=>{var a,i;t>260&&(n.addPage(),t=25),n.setFontSize(10),n.text((r.titel||"–").substring(0,40),25,t),n.setTextColor(100,116,139),n.text("".concat(r.menge," ").concat(r.einheit),110,t),n.text("".concat(null==(a=r.einzelpreis)?void 0:a.toFixed(2)," €"),140,t),n.setTextColor(30,41,59),n.setFont("helvetica","bold"),n.text("".concat(null==(i=r.summe)?void 0:i.toFixed(2)," €"),e-25,t,{align:"right"}),n.setFont("helvetica","normal"),t+=10}),t+=10,n.setDrawColor(226,232,240),n.line(100,t,e-20,t),t+=12,n.setFontSize(10),n.setTextColor(100,116,139),n.text("Netto",140,t),n.setTextColor(30,41,59),n.text("".concat(B.toFixed(2)," €"),e-25,t,{align:"right"}),t+=8,n.setTextColor(100,116,139),n.text("MwSt. 19%",140,t),n.setTextColor(30,41,59),n.text("".concat((.19*B).toFixed(2)," €"),e-25,t,{align:"right"}),t+=12,n.setFontSize(14),n.setFont("helvetica","bold"),n.text("Gesamt",140,t),n.setTextColor(37,99,235),n.text("".concat(K.toFixed(2)," €"),e-25,t,{align:"right"}),c.ki_analyse_notiz){t+=25,n.setFontSize(9),n.setFont("helvetica","bold"),n.setTextColor(71,85,105),n.text("KALKULATIONSHINWEISE",20,t),t+=8,n.setFont("helvetica","normal"),n.setTextColor(100,116,139);let r=n.splitTextToSize(c.ki_analyse_notiz,e-45);n.text(r,20,t)}let r=n.internal.pages.length-1;for(let t=1;t<=r;t++)n.setPage(t),n.setFontSize(8),n.setTextColor(180),n.text("PaintVoice AI  •  Seite ".concat(t," von ").concat(r),e/2,287,{align:"center"});n.save("Angebot_".concat(h.replace(/\s+/g,"-"),"_").concat(new Date().toISOString().slice(0,10),".pdf"))},children:"\uD83D\uDCC4 PDF"}),(0,r.jsx)("button",{className:"btn-ghost",onClick:()=>{b(""),v(""),j(""),d(""),k([]),z([]),p(null),m("")},children:"↺ Neu"})]})]}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("div",{className:"stats-grid",children:[(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsx)("div",{className:"stat-label",children:"Positionen"}),(0,r.jsx)("div",{className:"stat-value accent",children:(null==(n=c.positionen)?void 0:n.length)||0})]}),(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsx)("div",{className:"stat-label",children:"Netto"}),(0,r.jsxs)("div",{className:"stat-value warning",children:[B.toFixed(2)," €"]})]}),(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsx)("div",{className:"stat-label",children:"Brutto"}),(0,r.jsxs)("div",{className:"stat-value success",children:[K.toFixed(2)," €"]})]})]}),(0,r.jsx)("div",{className:"table-wrapper",children:(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Position"}),(0,r.jsx)("th",{children:"Menge"}),(0,r.jsx)("th",{children:"Preis"}),(0,r.jsx)("th",{children:"Summe"})]})}),(0,r.jsx)("tbody",{children:null==(e=c.positionen)?void 0:e.map((n,e)=>{var t,a;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n.titel}),(0,r.jsxs)("td",{style:{color:"var(--text-tertiary)"},children:[n.menge," ",n.einheit]}),(0,r.jsxs)("td",{style:{color:"var(--text-tertiary)"},children:[null==(t=n.einzelpreis)?void 0:t.toFixed(2)," €"]}),(0,r.jsxs)("td",{children:[null==(a=n.summe)?void 0:a.toFixed(2)," €"]})]},e)})})]})}),c.ki_analyse_notiz&&(0,r.jsxs)("div",{className:"ai-note",children:[(0,r.jsx)("div",{className:"ai-note-header",children:"\uD83E\uDD16 KI-Analyse"}),(0,r.jsx)("p",{children:c.ki_analyse_notiz})]})]})]}):(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("h2",{children:[(0,r.jsx)("div",{className:"card-header-icon",children:"\uD83D\uDCCB"}),"Neues Angebot"]})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("div",{className:"form-grid",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"label",children:"Kundenname"}),(0,r.jsx)("input",{type:"text",className:"input",value:h,onChange:n=>b(n.target.value),placeholder:"Schmidt GmbH"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"label",children:"Adresse"}),(0,r.jsx)("input",{type:"text",className:"input",value:f,onChange:n=>v(n.target.value),placeholder:"Musterstra\xdfe 1, Hamburg"})]}),(0,r.jsxs)("div",{className:"form-group full",children:[(0,r.jsxs)("label",{className:"label",children:["Medien",(0,r.jsx)("span",{className:"label-badge",children:"KI-Analyse"})]}),(0,r.jsxs)("div",{className:"upload-zone ".concat(C?"drag-over":""),onClick:()=>{var n;return null==(n=E.current)?void 0:n.click()},onDragOver:n=>{n.preventDefault(),D(!0)},onDragLeave:()=>D(!1),onDrop:n=>{n.preventDefault(),D(!1),_(n.dataTransfer.files)},children:[(0,r.jsx)("div",{className:"upload-icon",children:"\uD83D\uDCC1"}),(0,r.jsx)("h3",{children:"Dateien hochladen"}),(0,r.jsx)("p",{children:"Fotos & Videos f\xfcr pr\xe4zisere Kalkulation"})]}),(0,r.jsx)("input",{ref:E,type:"file",multiple:!0,accept:"image/*,video/*",style:{display:"none"},onChange:n=>_(n.target.files)}),N.length>0&&(0,r.jsx)("div",{className:"media-grid",children:N.map((n,e)=>{var t;return(0,r.jsxs)("div",{className:"media-item",children:[(null==(t=w[e])?void 0:t.type.startsWith("video/"))?(0,r.jsx)("video",{src:n}):(0,r.jsx)("img",{src:n,alt:""}),(0,r.jsx)("button",{className:"media-remove",onClick:()=>{k(n=>n.filter((n,t)=>t!==e)),z(n=>n.filter((n,t)=>t!==e))},children:"\xd7"})]},e)})})]}),(0,r.jsxs)("div",{className:"form-group full record-section",children:[(0,r.jsx)("label",{className:"label",children:"Sprachaufnahme"}),(0,r.jsx)("button",{className:"record-btn ".concat(s?"recording":""),onClick:s?R:M,children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"record-dot"}),"Aufnahme stoppen"]}):(0,r.jsx)(r.Fragment,{children:"\uD83C\uDF99️ Aufnahme starten"})}),l&&(0,r.jsxs)("div",{className:"transcript-box",children:["✓ ",l]})]}),(0,r.jsxs)("div",{className:"form-group full",children:[(0,r.jsx)("label",{className:"label",children:"Projektbeschreibung"}),(0,r.jsx)("textarea",{className:"input",value:y,onChange:n=>j(n.target.value),placeholder:"Wohnzimmer 25m\xb2, W\xe4nde und Decke streichen, Risse ausbessern..."})]})]}),u&&(0,r.jsxs)("div",{className:"status ".concat(u.includes("fehl")||u.includes("nicht")?"error":"warning"),children:["⚠️ ",u]}),(0,r.jsxs)("button",{className:"submit-btn",onClick:O,disabled:x||s,children:["Angebot erstellen",(0,r.jsx)("span",{children:"→"})]})]})]})})})]})]})}}},n=>{n.O(0,[33,930,241,441,255,358],()=>n(n.s=6831)),_N_E=n.O()}]);